name: 'oranc'
description: 'nix build with the help of caching with oranc'
author: 'Lin Yinfeng'
inputs:
  registry:
    required: true
    description: 'oci registry to use'
    default: 'ghcr.io'
  repositoryPart1:
    required: true
    description: 'first part of the repository name'
    default: '${{ github.repository_owner }}'
  repositoryPart2:
    required: true
    description: 'second part of the repository name'
    default: 'oranc-cache'
  upstream:
    required: true
    description: 'space-separated list of cache upstreams'
    default: 'https://cache.nixos.org'
  oranc:
    required: true
    description: 'address of oranc'
    default: 'http://oranc'
  anonymous:
    required: true
    description: 'weather remain anonymous'
    default: 'false'
  username:
    required: false
    description: 'oci registry username'
    default: '${{ github.actor }}'
  password:
    required: false
    description: 'oci registry password'
    default: '${{ github.token }}'
  signingKey:
    required: true
    description: 'nix signing key'
runs:
  using: 'node16'
  main: 'dist/index.js'
  # same entry point for simplicity
  post: 'dist/index.js'
